// interface
!function(i,t){if(i.Ya=i.Ya||{},Ya.Rum)throw new Error("Rum: interface is already defined");var n=i.performance,e=n&&n.timing&&n.timing.navigationStart||Ya.startPageLoad||+new Date,s=i.requestAnimationFrame;Ya.Rum={enabled:!!n,vsStart:document.visibilityState,vsChanged:!1,_defTimes:[],_defRes:[],_deltaMarks:{},_settings:{},_vars:{},init:function(i,t){this._settings=i,this._vars=t},getTime:n&&n.now?function(){return n.now()}:Date.now?function(){return Date.now()-e}:function(){return new Date-e},time:function(i){this._deltaMarks[i]=[this.getTime()]},timeEnd:function(i,t){var n=this._deltaMarks[i];n&&0!==n.length&&n.push(this.getTime(),t)},sendTimeMark:function(i,t,n,e){void 0===t&&(t=this.getTime()),this._defTimes.push([i,t,e]),this.mark(i,t)},sendResTiming:function(i,t){this._defRes.push([i,t])},sendRaf:function(i){var t=this.getSetting("forceFirstPaintTimeSending");if(s&&(t||!this.isVisibilityChanged())){var n=this,e="2616."+i;s(function(){!t&&n.isVisibilityChanged()||(n.sendTimeMark(e+".205"),s(function(){!t&&n.isVisibilityChanged()||n.sendTimeMark(e+".1928")}))})}},isVisibilityChanged:function(){return this.vsStart&&("visible"!==this.vsStart||this.vsChanged)},mark:n&&n.mark?function(i,t){n.mark(i+(t?": "+t:""))}:function(){},getSetting:function(i){var t=this._settings[i];return null===t?null:t||""}},document.addEventListener&&document.addEventListener("visibilitychange",function i(){Ya.Rum.vsChanged=!0,document.removeEventListener("visibilitychange",i)})}(window);
// longtask
!function(){"use strict";if(window.PerformanceLongTaskTiming){var e=Ya.Rum._tti={events:[],observer:new PerformanceObserver(function(n){e.events=e.events.concat(n.getEntries()),e.events.length>100&&e.events.shift()})};e.observer.observe({entryTypes:["longtask"]})}}();
// io
!function(){"use strict";Ya.Rum.observeDOMNode=window.IntersectionObserver?function(e,i,n){var t=this,r=Ya.Rum.getSetting("forceFirstPaintTimeSending");!function s(){if(r||!t.isVisibilityChanged()){var o="string"==typeof i?document.querySelector(i):i;o?new IntersectionObserver(function(i,n){!r&&t.isVisibilityChanged()||(Ya.Rum.sendTimeMark(e),n.unobserve(o))},n).observe(o):setTimeout(s,100)}}()}:function(){}}();
// send
!function(){"use strict";var t,e=[];function n(){var n=Ya.Rum.getSetting("clck"),a=e.join("\r\n");if(e=[],t=null,n&&!(navigator.sendBeacon&&Ya.Rum.getSetting("beacon")&&navigator.sendBeacon(n,a))){var i=new XMLHttpRequest;i.open("POST",n),i.send(a)}}Ya.Rum.send=function(a,i,o,u,r,s,c){clearTimeout(t);var g=function(t,e,n,a,i,o){var u=Ya.Rum.getSetting("slots");return[o?"/"+o.join("/"):"","/path="+e,u?"/slots="+u.join(";"):"",n?"/vars="+n:"","/cts="+(new Date).getTime(),"/*"]}(0,i,o,0,0,c);e.push("/reqid="+Ya.Rum.getSetting("reqid")+g.join("")),e.length<42?t=setTimeout(n,15):n()}}();
// onload
Ya.Rum.enabled&&addEventListener("load",function e(){removeEventListener("load",e),Ya.Rum.sendTimeMark("1724");for(var a=document.querySelectorAll("script[data-rCid], div[data-rCid]"),t=0,r=a.length;t<r;t++){var d=a[t],i=d.src;if(!i){var n=getComputedStyle(d).backgroundImage;if(n){var m=n.match(/^url\(["']?(.*?)["']?\)$/);m&&(i=m[1])}}i&&Ya.Rum.sendResTiming(d.getAttribute("data-rCid"),i)}});
// retries
Ya.Rum.enabled&&(Ya.Rum.sendRetriesCount=function(e,n){if(e&&n&&!(n<1)){var u=Ya.Rum.getVarsList();u.push("13="+encodeURIComponent(e),"1385="+n),Ya.Rum.sendCounter("690.2096.3037",u)}});
// error-interface
!function(n){if(!n.Ya||!Ya.Rum)throw new Error("Rum: interface is not defined");var t=Ya.Rum;t.getSetting=function(n){var e=t._settings[n];return null===e?null:e||""}}(window);
// error-implementation
!function(e){var r={client:["690.2354",-1,100,0],uncaught:["690.2361",100,10,0],external:["690.2854",100,10,0],script:["690.2609",100,10,0]},n={};e.ERROR_LEVEL={INFO:"info",DEBUG:"debug",WARN:"warn",ERROR:"error",FATAL:"fatal"},e._errorSettings={clck:"https://yandex.ru/clck/click",beacon:!0,project:"unknown",page:"",env:"",experiments:[],additional:{},platform:"",region:"",level:"",version:"",preventError:!1,unhandledRejection:!1,debug:!1,limits:{},silent:{},filters:{}};var t=!1;function o(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e}function i(e){return"boolean"==typeof e&&(e=+e),"number"==typeof e?e+"":null}e.initErrors=function(r){o(e._errorSettings,r),t||(window.addEventListener?(window.addEventListener("error",a),"Promise"in window&&e._errorSettings.unhandledRejection&&window.addEventListener("unhandledrejection",function(e){var r,n=e.reason;if(n){if(n.stack&&n.message)r=n.message;else if("[object Event]"===(r=String(n)))r="event.type: "+n.type;else if("[object Object]"===r)try{r=JSON.stringify(n)}catch(e){r="unknown object"}a({message:"Unhandled rejection: "+r,stack:n.stack})}})):window.onerror=function(e,r,n,t,o){a({error:o||new Error(e||"Empty error"),message:e,lineno:n,colno:t,filename:r})},t=!0)},e.updateErrors=function(r){o(e._errorSettings,r)},e._handleError=function(t,i){var a,s,l=e._errorSettings;if(l.preventError&&t.preventDefault&&t.preventDefault(),i)a=t,s="client";else{a=e._normalizeError(t),s=a.type;var c=l.onError;"function"==typeof c&&c(a);var u=l.transform;"function"==typeof u&&(a=u(a))}var d=r[s][1];"number"==typeof l.limits[s]&&(d=l.limits[s]);var m=r[s][2];"number"==typeof l.silent[s]&&(m=l.silent[s]);var f=r[s][3];if(f<d||-1===d){a.path=r[s][0];var p="";try{var v=o({},l.additional);p=JSON.stringify(o(v,a.additional))}catch(e){l.debug&&window.console&&console.error("[error-counter] json.stringify:",e)}var g=function(){n[a.message]=!1,e._sendError(a,{additional:p,silent:f<m||-1===m?"no":"yes",isCustom:Boolean(i)}),r[s][3]++}.bind(this);if(void 0===l.throttleSend)g();else{if(n[a.message])return;n[a.message]=!0,setTimeout(g,l.throttleSend)}}},e._baseNormalizeError=function(e){var r=(e=e||{}).filename||e.fileName||"",n=e.error&&e.error.stack||e.stack||"",t=e.message||"";return{file:r,line:e.lineno||e.lineNumber,col:e.colno||e.colNumber,stack:n,message:t}},e._normalizeError=function(r){var n=e._baseNormalizeError(r),t="uncaught",o=e._isExternalError(n.file,n.message,n.stack),i="",a="";return o.hasExternal?(t="external",i=o.common,a=o.custom):/^Script error\.?$/.test(n.message)&&(t="script"),n.external=i,n.externalCustom=a,n.type=t,n},e._sendError=function(r,n){n=n||{};var t=e._errorSettings,o=t.experiments.length?t.experiments.join(";"):"",a={"-url":r.file,"-line":r.line,"-col":r.col,"-stack":r.stack,"-env":t.env,"-msg":r.message,"-external":r.external,"-externalCustom":r.externalCustom,"-project":t.project,"-service":r.service,"-page":r.page||t.page,"-platform":t.platform,"-level":r.level,"-experiments":o,"-version":t.version,"-region":t.region,"-source":r.source,"-sourceMethod":r.sourceMethod,"-type":n.isCustom?r.type:"","-block":r.block,"-method":r.method,"-additional":n.additional,"-adb":i(Ya.blocker)||i(t.blocker),"-ua":navigator.userAgent,"-silent":n.silent,"-ts":+new Date};t.debug&&window.console&&console.error("[error-counter]",a),e.send(null,r.path,function(e){var r=[];for(var n in e)e.hasOwnProperty(n)&&(e[n]||0===e[n])&&r.push(n+"="+encodeURIComponent(e[n]));return r.join(",")}(a),null,null,null,null)};var a=function(e){Ya.Rum._handleError(e,!1)}}(Ya.Rum);
// error-filters
!function(e){var r={url:{0:/(miscellaneous|extension)_bindings/,1:/^chrome:/,2:/kaspersky-labs\.com\//,3:/^(?:moz|chrome)-extension:\/\//,4:/^file:/,5:/^resource:\/\//,6:/webnetc\.top/,7:/local\.adguard\.com/},message:{0:/__adgRemoveDirect/,1:/Content Security Policy/,2:/vid_mate_check/,3:/ucapi/,4:/Access is denied/i,5:/^Uncaught SecurityError/i,6:/__ybro/,7:/__show__deepen/,8:/ntp is not defined/,9:/Cannot set property 'install' of undefined/,10:/NS_ERROR/,11:/Error loading script/,12:/^TypeError: undefined is not a function$/,13:/__firefox__\.(?:favicons|metadata|reader|searchQueryForField|searchLoginField)/},stack:{0:/(?:moz|chrome)-extension:\/\//}};function n(e,r){if(e&&r){var n=[];for(var o in r)r.hasOwnProperty(o)&&r[o].test(e)&&n.push(o);return n.join("_")}}function o(e,o){var i,t=[];for(var s in r)r.hasOwnProperty(s)&&(i=n(e[s],o[s]))&&t.push(s+"~"+i);return t.join(";")}e._isExternalError=function(n,i,t){var s=e._errorSettings.filters||{},a={url:(n||"")+"",message:(i||"")+"",stack:(t||"")+""},c=o(a,r),u=o(a,s);return{common:c,custom:u,hasExternal:!(!c&&!u)}}}(Ya.Rum);
